<%- include('layout/header', {}) %>

<header>
    <h1><%= list.title %></h1>
</header>

<nav>
<%- include('partials/listTree', { items: lists }) %>
</nav>

<section class="main">
    <table>
        <thead>
            <tr>
                <th>&nbsp;<!-- Title (implicit) --></th>
                <th>Start</th>
                <th>Due</th>
            </tr>
        </thead>
        <tbody>
            <% tasks.forEach(task => { %>
                <tr>
                    <td>
                        <% if (task.status === "completed") { %>
                            <input type="checkbox" readonly checked />
                            <%= task.title %>
                        <% } else if (task.status === "canceled") { %>
                            <s>
                                <input type="checkbox" readonly />
                                <%= task.title %>
                            </s>
                        <% } else { %>
                            <input type="checkbox" readonly />
                            <%= task.title %>
                        <% } %>
        
                        <% if (task.notes) { %>
                            <!-- TODO remove BR -->
                            <br />
                            <small>
                                <%= task.notes.text %> 
                            </small>
                        <% } %>
                    </td>
                    <td>
                        Start
                    </td>
                    <td>
                        <% if (task.due_date) { %>
                            <%= dateformat(task.due_date, "yyyy/mm/dd") %> 
                        <% } %>
                    </td>
                </tr>
                <!-- TODO: children -->
            <% }) %>
        </tbody>
    </table>
</section>

<%- include('layout/footer', {}) %>